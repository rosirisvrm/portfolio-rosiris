---
import KiwiIcon from "./icons/KiwiIcon.astro";
import StrawberryIcon from './icons/StrawberryIcon.astro';
import ButtonIcon from './ButtonIcon.astro';
---

<ButtonIcon id="dark-mode-toggle" aria-label="Toggle dark mode" class="focus:ring-primary-500 dark:focus:ring-secondary-400">
    <StrawberryIcon class="size-5 text-secondary-400 hidden dark:block" />
    <KiwiIcon class="size-5 text-primary-500 block dark:hidden" />
</ButtonIcon>

<script>
  // Función para hacer toggle del dark mode
  function toggleDarkMode() {
    const html = document.documentElement;
    const isDark = html.classList.contains('dark');
    
    if (isDark) {
      html.classList.remove('dark');
      localStorage.setItem('theme', 'light');
      
    } else {
      html.classList.add('dark');
      localStorage.setItem('theme', 'dark');

    }
  }

  // Agregar event listener al botón
  document.addEventListener('DOMContentLoaded', () => {
    const button = document.getElementById('dark-mode-toggle');
    if (button) {
      button.addEventListener('click', toggleDarkMode);
    }
  });

  // Para navegación del lado del cliente (View Transitions)
  document.addEventListener('astro:page-load', () => {
    const button = document.getElementById('dark-mode-toggle');
    if (button) {
      button.addEventListener('click', toggleDarkMode);
    }
  });
</script>