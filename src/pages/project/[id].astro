---
import Layout from '../../layouts/Layout.astro';
import ActionButton from '../../components/ActionButton.astro';
import GithubIcon from '../../components/icons/GithubIcon.astro';
import TechSkillItem from '../../components/TechSkillItem.astro';
import BackIcon from '../../components/icons/BackIcon.astro';
import LinkIcon from '../../components/icons/LinkIcon.astro';
import { projects } from '../../data';

export const prerender = false;

const { id } = Astro.params;

const project = projects.find((p) => p.id === id)

if(!project) return Astro.redirect("/");

const { title, description, imgUrl, repoUrl, demoUrl, technologies } = project

---

<Layout>	
	<main class="w-full min-h-screen section-bg pb-10">	
        <div class="pt-6 pb-3 px-20">
            <a href="/#projects" class="text-white cursor-pointer">
                <BackIcon class='size-4 sm:size-8 transition hover:scale-110' />
            </a>
        </div>

        <div class="max-w-2xl mx-auto flex flex-col gap-6">
            <img src={`../../public/${imgUrl}.png`} class="w-full h-60 md:h-72 rounded-xl" />
            <h5 class="uppercase font-bold text-lg">{title || ''}</h5>
            <p class="mb-5 text-sm">
                {description || ''}
            </p>
            <div class="flex flex-row gap-2 flex-wrap justify-center">
                {technologies.map((tech) => (
                    <TechSkillItem>
                        {tech}
                    </TechSkillItem>
                ))}
            </div>
            <div class="flex flex-row gap-4 justify-center">
                <ActionButton href={repoUrl} target='_blank'>
                    <GithubIcon class="sm:size-4 size-3" />
                    Ver repositorio
                </ActionButton>
                <ActionButton href={demoUrl} target='_blank'>
                    <LinkIcon class="sm:size-4 size-3" />
                    Ver demo
                </ActionButton>
            </div>
        </div>
	</main>
</Layout>
